<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>CBT Sandi Caesar</title>

<style>

body{
font-family:Arial;
background:linear-gradient(135deg,#0f2027,#2c5364);
color:white;
text-align:center;
}

.box{
background:white;
color:black;
width:800px;
margin:auto;
padding:20px;
border-radius:20px;
}

.encrypt{
font-size:40px;
color:red;
margin:20px;
}

.kunci{
font-size:22px;
color:blue;
margin:10px;
font-weight:bold;
}

input,button{
padding:10px;
font-size:18px;
margin:10px;
}

.info{
font-size:20px;
}

.medal{
font-size:50px;
}

</style>

</head>

<body>

<h1>CBT GAME SANDI CAESAR</h1>

<div class="box" id="login">

Nama Siswa:

<br>

<input id="nama">

<br>

<button onclick="mulai()">Mulai</button>

</div>


<div class="box" id="game" style="display:none;">

<div class="info">

Level: <span id="level">1</span> |
Skor: <span id="score">0</span> |
Nyawa: <span id="life">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span> |
Waktu: <span id="time">60</span>

</div>

<div class="kunci">
Kunci (Shift): <span id="kunci">-</span>
</div>

<div class="encrypt" id="soal"></div>

<input id="jawab">

<br>

<button onclick="cek()">Jawab</button>

<button onclick="kirim()">Selesai & Kirim</button>

<div class="medal" id="medal"></div>

</div>

<script>

let nama="";
let score=0;
let level=1;
let life=3;
let waktu=300;

let asli="";
let shift=1;


// BANK SOAL 20 KATA

let kata=[

"DATA",
"SISWA",
"GURU",
"UJIAN",
"SERVER",
"CLIENT",
"JARINGAN",
"ENKRIPSI",
"DEKRIPSI",
"KOMPUTER",
"INTERNET",
"PASSWORD",
"SECURITY",
"DATABASE",
"PROGRAM",
"ALGORITMA",
"INFORMATIKA",
"TEKNOLOGI",
"APLIKASI",
"DIGITAL"

];


// URL GOOGLE FORM (SUDAH DIPERBAIKI)

let FORM_URL="https://docs.google.com/forms/d/e/1FAIpQLSePISK36m59nq__0SEbfqw7_3iBxjwReAk3JO6O7PmJpTFLUA/formResponse";

let ENTRY_NAMA="entry.1085492539";

let ENTRY_SKOR="entry.699640572";

let ENTRY_LEVEL="entry.567359985";



function mulai(){

nama=document.getElementById("nama").value;

if(nama==""){
alert("Isi nama dulu");
return;
}

document.getElementById("login").style.display="none";
document.getElementById("game").style.display="block";

soalBaru();
update();
timer();

}


function encrypt(teks){

let hasil="";

for(let c of teks){

let kode = c.charCodeAt(0) - 65; // ubah ke 0‚Äì25

kode = (kode + shift) % 26; // geser + modulo

hasil += String.fromCharCode(kode + 65); // kembali ke A‚ÄìZ

}

return hasil;

}


function soalBaru(){

shift=Math.floor(Math.random()*5)+1; // shift acak 1 - 5

asli=kata[Math.floor(Math.random()*kata.length)];

document.getElementById("soal").innerHTML=encrypt(asli);

document.getElementById("kunci").innerHTML=shift;

}


function cek(){

let j=document.getElementById("jawab").value.toUpperCase();

if(j==asli){

score+=10;
alert("Benar");

if(score%50==0){

level++;
alert("Naik Level "+level);

}

}else{

life--;
alert("Salah");

}

if(life<=0){

selesai();
return;

}

update();

document.getElementById("jawab").value="";

soalBaru();

}


function update(){

document.getElementById("score").innerHTML=score;

document.getElementById("level").innerHTML=level;

document.getElementById("life").innerHTML="‚ù§Ô∏è".repeat(life);

document.getElementById("time").innerHTML=waktu;

}


function timer(){

let t=setInterval(()=>{

waktu--;

update();

if(waktu<=0){

clearInterval(t);
selesai();

}

},1000);

}


function medal(){

if(score>=200) return "ü•á EMAS";

if(score>=100) return "ü•à PERAK";

if(score>=50) return "ü•â PERUNGGU";

return "üéì PESERTA";

}


function selesai(){

document.getElementById("medal").innerHTML=medal();

alert("Ujian selesai\nSkor: "+score);

}


function kirim(){

fetch(FORM_URL,{

method:"POST",

mode:"no-cors",

headers:{
"Content-Type":"application/x-www-form-urlencoded"
},

body:

ENTRY_NAMA+"="+encodeURIComponent(nama)+
"&"+ENTRY_SKOR+"="+encodeURIComponent(score)+
"&"+ENTRY_LEVEL+"="+encodeURIComponent(level)

});

alert("Skor berhasil dikirim");

}


window.onbeforeunload=function(){

return "Yakin keluar?";

};

</script>

</body>
</html>
